events {
    worker_connections 1024;
}

http {
    upstream app_metrics {
        server socialsundae.io:443;
    }

    server {
        listen 80;
        
        # Proxy for app-metrics endpoint
        location /web/api/metrics {
            proxy_pass https://socialsundae.io/api/metrics;
            
            # Add API key from Railway environment variable
            proxy_set_header X-API-Key ${API_KEY};
            
            # SSL settings for HTTPS upstream
            proxy_ssl_verify on;
            proxy_ssl_server_name on;
        }
    }
} 